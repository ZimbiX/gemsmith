require "dry/container"

<% namespace do %>
  module CLI
    module Actions
      # Provides a single container of application and action specific dependencies.
      module Container
        extend Dry::Container::Mixin

        config.registry = ->(container, key, value, _options) { container[key.to_s] = value }

        merge <%= configuration.project_namespaced_class %>::Container

        register(:config) { Config.new }
      end
    end
  end
<% end %>
